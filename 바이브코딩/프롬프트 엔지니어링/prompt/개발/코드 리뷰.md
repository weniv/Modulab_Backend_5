# 코드 리뷰 프롬프트

## 프로젝트 정보
- 프로젝트명: Django 동영상 스트리밍 플랫폼

## 요청 템플릿

```
다음 코드를 리뷰해주세요.

[코드 설명]:
[파일 경로]:
[변경 사항]:

[코드]
```python
# 리뷰할 코드 붙여넣기
```

답변 형식:
# 코드 리뷰

## 1. 전체 평가
- **코드 품질:** ⭐⭐⭐⭐☆ (4/5)
- **가독성:** ⭐⭐⭐⭐⭐ (5/5)
- **성능:** ⭐⭐⭐☆☆ (3/5)
- **보안:** ⭐⭐⭐⭐☆ (4/5)
- **유지보수성:** ⭐⭐⭐⭐☆ (4/5)

## 2. 긍정적인 부분 ✅

### 2.1 잘 작성된 부분
- [구체적인 칭찬 1]
  ```python
  # 좋은 예시 코드
  ```

- [구체적인 칭찬 2]
  ```python
  # 좋은 예시 코드
  ```

### 2.2 모범 사례 적용
- Django 코딩 컨벤션 준수
- DRY (Don't Repeat Yourself) 원칙 적용
- SOLID 원칙 적용

## 3. 개선이 필요한 부분 ⚠️

### 3.1 Critical (즉시 수정 필요)

#### Issue #1: [문제점 제목]
**심각도:** 🔴 Critical
**분류:** Security / Performance / Bug

**현재 코드:**
```python
# 문제가 있는 코드
```

**문제점:**
- [구체적인 문제 설명]
- [발생 가능한 이슈]
- [영향 범위]

**개선 방안:**
```python
# 개선된 코드
```

**이유:**
- [개선이 필요한 이유]
- [개선 후 기대 효과]

---

#### Issue #2: [문제점 제목]
**심각도:** 🔴 Critical
**분류:** Security / Performance / Bug

**현재 코드:**
```python
# 문제가 있는 코드
```

**문제점:**
- [구체적인 문제 설명]

**개선 방안:**
```python
# 개선된 코드
```

---

### 3.2 Major (중요한 개선 사항)

#### Issue #3: [문제점 제목]
**심각도:** 🟡 Major
**분류:** Code Quality / Design Pattern

**현재 코드:**
```python
# 개선이 필요한 코드
```

**문제점:**
- [구체적인 문제 설명]

**개선 방안:**
```python
# 개선된 코드
```

---

### 3.3 Minor (사소한 개선 사항)

#### Issue #4: [문제점 제목]
**심각도:** 🟢 Minor
**분류:** Code Style / Convention

**현재 코드:**
```python
# 개선이 필요한 코드
```

**개선 방안:**
```python
# 개선된 코드
```

## 4. 카테고리별 리뷰

### 4.1 보안 (Security)
#### ✅ 잘된 부분
- [보안 관련 긍정적인 부분]

#### ⚠️ 개선 필요
- [ ] **SQL Injection 방지**
  - ORM 사용 확인
  - Raw Query 검증

- [ ] **XSS 방지**
  - 입력값 검증
  - 출력값 이스케이핑

- [ ] **인증/인가**
  - 권한 체크
  - JWT 토큰 검증

- [ ] **민감 정보 보호**
  - 비밀번호 해싱
  - API 키 환경 변수화

### 4.2 성능 (Performance)
#### ✅ 잘된 부분
- [성능 관련 긍정적인 부분]

#### ⚠️ 개선 필요
- [ ] **데이터베이스 쿼리 최적화**
  - N+1 문제 해결 (select_related, prefetch_related)
  - 불필요한 쿼리 제거
  - 인덱스 활용

- [ ] **캐싱**
  - Redis 캐싱 적용
  - 쿼리셋 캐싱
  - 메서드 캐싱 (@cached_property)

- [ ] **비동기 처리**
  - Celery 작업 분리
  - 무거운 작업 백그라운드화

### 4.3 코드 품질 (Code Quality)
#### ✅ 잘된 부분
- [코드 품질 관련 긍정적인 부분]

#### ⚠️ 개선 필요
- [ ] **가독성**
  - 변수명/함수명 명확성
  - 주석 추가
  - 복잡한 로직 분리

- [ ] **재사용성**
  - 중복 코드 제거
  - 유틸리티 함수 분리
  - Mixin 활용

- [ ] **에러 처리**
  - try-except 블록
  - 명확한 에러 메시지
  - 로깅

### 4.4 테스트 (Testing)
- [ ] **단위 테스트**
  - 모델 테스트
  - 시리얼라이저 테스트
  - 뷰 테스트

- [ ] **커버리지**
  - 80% 이상 목표
  - 엣지 케이스 테스트

- [ ] **테스트 코드 품질**
  - Given-When-Then 패턴
  - Factory 사용
  - Mock 활용

### 4.5 문서화 (Documentation)
- [ ] **Docstring**
  - 클래스 설명
  - 메서드 설명
  - 파라미터 설명

- [ ] **주석**
  - 복잡한 로직 설명
  - TODO 표시

- [ ] **타입 힌팅**
  - 함수 파라미터
  - 반환 타입

## 5. Django 특화 리뷰

### 5.1 모델 (Models)
- [ ] **필드 정의**
  - 적절한 필드 타입
  - null=True vs blank=True 구분
  - 기본값 설정

- [ ] **관계 정의**
  - on_delete 명시
  - related_name 설정
  - 순환 참조 방지

- [ ] **메타 옵션**
  - ordering
  - indexes
  - unique_together

- [ ] **메서드**
  - __str__ 정의
  - get_absolute_url
  - 커스텀 메서드 분리

### 5.2 시리얼라이저 (Serializers)
- [ ] **필드 정의**
  - 필요한 필드만 노출
  - read_only_fields 설정
  - write_only_fields 설정

- [ ] **검증**
  - validate_<field_name>
  - validate 메서드
  - validators 활용

- [ ] **관계 처리**
  - nested serializer
  - PrimaryKeyRelatedField
  - StringRelatedField

### 5.3 뷰 (Views)
- [ ] **ViewSet vs APIView**
  - 적절한 클래스 선택
  - 필요한 메서드만 구현

- [ ] **권한**
  - permission_classes 설정
  - 커스텀 권한 구현

- [ ] **필터링**
  - django-filter 활용
  - 검색 기능
  - 정렬 기능

- [ ] **페이지네이션**
  - PageNumberPagination
  - LimitOffsetPagination

### 5.4 URL 라우팅
- [ ] **네이밍**
  - app_name 설정
  - URL name 설정

- [ ] **라우터**
  - DefaultRouter vs SimpleRouter
  - 커스텀 액션 등록

## 6. 추가 제안 사항

### 6.1 아키텍처
- [아키텍처 개선 제안]
- [디자인 패턴 적용 제안]

### 6.2 라이브러리/패키지
- [유용한 서드파티 패키지 제안]
- [기존 패키지 대체 제안]

### 6.3 개발 도구
- [린터 설정 제안]
  - flake8
  - black
  - isort

- [타입 체크]
  - mypy

### 6.4 CI/CD
- [테스트 자동화]
- [배포 자동화]

## 7. 우선순위별 액션 아이템

### 즉시 수정 (High Priority)
1. [ ] [Critical Issue #1]
2. [ ] [Critical Issue #2]

### 다음 스프린트 (Medium Priority)
1. [ ] [Major Issue #1]
2. [ ] [Major Issue #2]

### 추후 개선 (Low Priority)
1. [ ] [Minor Issue #1]
2. [ ] [Minor Issue #2]

## 8. 참고 자료
- [Django Best Practices](https://docs.djangoproject.com/en/stable/misc/design-philosophies/)
- [DRF Best Practices](https://www.django-rest-framework.org/)
- [PEP 8 Style Guide](https://pep8.org/)
- [Django Code Style](https://docs.djangoproject.com/en/dev/internals/contributing/writing-code/coding-style/)

## 9. 리뷰 요약

### 필수 수정 사항
- [Critical 이슈 요약]

### 권장 수정 사항
- [Major 이슈 요약]

### 선택 수정 사항
- [Minor 이슈 요약]

### 전체 평가
[전반적인 코드 품질에 대한 종합 평가]

### 승인 여부
- [ ] ✅ Approve (승인)
- [ ] 🔄 Request Changes (수정 요청)
- [ ] 💬 Comment (의견만 제시)
```

## 코드 리뷰 체크리스트

### 일반
- [ ] 코드가 요구사항을 충족하는가?
- [ ] 코드가 이해하기 쉬운가?
- [ ] 코드에 중복이 없는가?
- [ ] 함수/메서드가 단일 책임 원칙을 따르는가?

### Django 특화
- [ ] 마이그레이션 파일이 포함되어 있는가?
- [ ] settings에 새로운 앱이 등록되었는가?
- [ ] URL이 올바르게 라우팅되는가?
- [ ] Admin이 등록되어 있는가?

### 보안
- [ ] 사용자 입력값이 검증되는가?
- [ ] SQL Injection 방지되는가?
- [ ] 권한 체크가 있는가?
- [ ] 민감한 정보가 노출되지 않는가?

### 성능
- [ ] N+1 쿼리 문제가 없는가?
- [ ] 불필요한 데이터를 가져오지 않는가?
- [ ] 캐싱이 적절히 사용되는가?

### 테스트
- [ ] 테스트 코드가 작성되었는가?
- [ ] 테스트가 통과하는가?
- [ ] 엣지 케이스를 다루는가?
```
